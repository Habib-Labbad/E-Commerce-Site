{"ast":null,"code":"import _regeneratorRuntime from \"/home/habib/Desktop/aaaaa/E-Commerce-Site/fsv-front-end/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/habib/Desktop/aaaaa/E-Commerce-Site/fsv-front-end/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport NotFoundPage from \"./NotFoundPage.vue\";\nexport default {\n  name: \"ProductDetailPage\",\n  components: {\n    NotFoundPage: NotFoundPage\n  },\n  data: function data() {\n    return {\n      product: {},\n      cartItems: [],\n      showSuccesMessage: false\n    };\n  },\n  computed: {\n    itemIsInCart: function itemIsInCart() {\n      var _this = this;\n      return this.cartItems.some(function (item) {\n        return item.id === _this.product.id;\n      });\n    }\n  },\n  methods: {\n    addToCart: function addToCart() {\n      var _this2 = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return axios.post(\"/api/users/12345/cart\", {\n                productId: _this2.$route.params.id\n              });\n            case 2:\n              _this2.showSuccesMessage = true;\n              setTimeout(function () {\n                _this2.$router.push(\"products\");\n              }, 1500);\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    }\n  },\n  created: function created() {\n    var _this3 = this;\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var _yield$axios$get, product, _yield$axios$get2, cartItems;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return axios.get(\"/api/products/\".concat(_this3.$route.params.id));\n          case 2:\n            _yield$axios$get = _context2.sent;\n            product = _yield$axios$get.data;\n            _this3.product = product;\n            _context2.next = 7;\n            return axios.get(\"/api/users/12345/cart\");\n          case 7:\n            _yield$axios$get2 = _context2.sent;\n            cartItems = _yield$axios$get2.data;\n            _this3.cartItems = cartItems;\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }))();\n  }\n};","map":{"version":3,"names":["axios","NotFoundPage","name","components","data","product","cartItems","showSuccesMessage","computed","itemIsInCart","_this","some","item","id","methods","addToCart","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","post","productId","$route","params","setTimeout","$router","push","stop","created","_this3","_callee2","_yield$axios$get","_yield$axios$get2","_callee2$","_context2","get","concat","sent"],"sources":["src/views/ProductDetailPage.vue"],"sourcesContent":["<template>\n  <div id=\"page-wrap\" v-if=\"product\">\n    <div id=\"img-wrap\">\n      <img :src=\"product.imageUrl\" alt=\"\" />\n    </div>\n    <div id=\"product-details\">\n      <h1>{{ product.name }}</h1>\n      <h3 id=\"price\">${{ product.price }}</h3>\n      <p>Average rating:{{ product.averageRating }}</p>\n      <button\n        v-if=\"!itemIsInCart && !showSuccesMessage\"\n        v-on:click=\"addToCart\"\n        id=\"add-to-cart\"\n      >\n        Add to Cart\n      </button>\n      <button\n        v-if=\"!itemIsInCart && showSuccesMessage\"\n        class=\"green-button\"\n        id=\"add-to-cart\"\n      >\n        Successfully added button to cart!\n      </button>\n      <button v-if=\"itemIsInCart\" class=\"grey-button\" id=\"add-to-cart\">\n        Item is already in cart!\n      </button>\n      <h4>Description</h4>\n      <p>{{ product.description }}</p>\n    </div>\n  </div>\n  <NotFoundPage v-else />\n</template>\n\n<script>\nimport axios from \"axios\";\nimport NotFoundPage from \"./NotFoundPage.vue\";\nexport default {\n  name: \"ProductDetailPage\",\n  components: { NotFoundPage },\n  data() {\n    return {\n      product: {},\n      cartItems: [],\n      showSuccesMessage: false,\n    };\n  },\n  computed: {\n    itemIsInCart() {\n      return this.cartItems.some((item) => item.id === this.product.id);\n    },\n  },\n\n  methods: {\n    async addToCart() {\n      await axios.post(\"/api/users/12345/cart\", {\n        productId: this.$route.params.id,\n      });\n      this.showSuccesMessage = true;\n      setTimeout(() => {\n        this.$router.push(\"products\");\n      }, 1500);\n    },\n  },\n  async created() {\n    const { data: product } = await axios.get(\n      `/api/products/${this.$route.params.id}`\n    );\n    this.product = product;\n    const { data: cartItems } = await axios.get(\"/api/users/12345/cart\");\n    this.cartItems = cartItems;\n  },\n};\n</script>\n\n<style scoped>\n#page-wrap {\n  margin-top: 16px;\n  padding: 16px;\n  max-width: 600px;\n}\n\n#img-wrap {\n  text-align: center;\n}\n\nimg {\n  width: 400px;\n}\n\n#product-details {\n  padding: 16px;\n  position: relative;\n}\n\n#add-to-cart {\n  width: 100%;\n}\n\n#price {\n  position: absolute;\n  top: 24px;\n  right: 16px;\n}\n\n.green-button {\n  background-color: green;\n}\n\n.grey-button {\n  background-color: #888;\n}\n</style>"],"mappings":";;;;;;AAkCA,OAAAA,KAAA;AACA,OAAAC,YAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAF,YAAA,EAAAA;EAAA;EACAG,IAAA,WAAAA,KAAA;IACA;MACAC,OAAA;MACAC,SAAA;MACAC,iBAAA;IACA;EACA;EACAC,QAAA;IACAC,YAAA,WAAAA,aAAA;MAAA,IAAAC,KAAA;MACA,YAAAJ,SAAA,CAAAK,IAAA,WAAAC,IAAA;QAAA,OAAAA,IAAA,CAAAC,EAAA,KAAAH,KAAA,CAAAL,OAAA,CAAAQ,EAAA;MAAA;IACA;EACA;EAEAC,OAAA;IACAC,SAAA,WAAAA,UAAA;MAAA,IAAAC,MAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,OAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAE,IAAA;cAAA,OACAzB,KAAA,CAAA0B,IAAA;gBACAC,SAAA,EAAAX,MAAA,CAAAY,MAAA,CAAAC,MAAA,CAAAhB;cACA;YAAA;cACAG,MAAA,CAAAT,iBAAA;cACAuB,UAAA;gBACAd,MAAA,CAAAe,OAAA,CAAAC,IAAA;cACA;YAAA;YAAA;cAAA,OAAAT,QAAA,CAAAU,IAAA;UAAA;QAAA,GAAAb,OAAA;MAAA;IACA;EACA;EACAc,OAAA,WAAAA,QAAA;IAAA,IAAAC,MAAA;IAAA,OAAAlB,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAiB,SAAA;MAAA,IAAAC,gBAAA,EAAAhC,OAAA,EAAAiC,iBAAA,EAAAhC,SAAA;MAAA,OAAAY,mBAAA,GAAAG,IAAA,UAAAkB,UAAAC,SAAA;QAAA,kBAAAA,SAAA,CAAAhB,IAAA,GAAAgB,SAAA,CAAAf,IAAA;UAAA;YAAAe,SAAA,CAAAf,IAAA;YAAA,OACAzB,KAAA,CAAAyC,GAAA,kBAAAC,MAAA,CACAP,MAAA,CAAAP,MAAA,CAAAC,MAAA,CAAAhB,EAAA,EACA;UAAA;YAAAwB,gBAAA,GAAAG,SAAA,CAAAG,IAAA;YAFAtC,OAAA,GAAAgC,gBAAA,CAAAjC,IAAA;YAGA+B,MAAA,CAAA9B,OAAA,GAAAA,OAAA;YAAAmC,SAAA,CAAAf,IAAA;YAAA,OACAzB,KAAA,CAAAyC,GAAA;UAAA;YAAAH,iBAAA,GAAAE,SAAA,CAAAG,IAAA;YAAArC,SAAA,GAAAgC,iBAAA,CAAAlC,IAAA;YACA+B,MAAA,CAAA7B,SAAA,GAAAA,SAAA;UAAA;UAAA;YAAA,OAAAkC,SAAA,CAAAP,IAAA;QAAA;MAAA,GAAAG,QAAA;IAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}